function disconnect(){if(instance)return instance.invokeMethodAsync("Disconnect")}function push(){Matter.Body.applyForce(ball,ball.position,{x:.1,y:0})}function drawDot(n,t,i,r){n.clearRect(0,0,clientCanvas.width,clientCanvas.height);n.fillStyle="rgba(0, 255, 0, 1)";n.beginPath();n.arc(t,i,r,0,Math.PI*2,!0);n.closePath();n.fill();n.strokeStyle="rgba(0, 255, 0, 1)";n.beginPath();n.moveTo(t,i);n.lineTo(canvasCenter.x,canvasCenter.y);n.closePath();n.stroke()}function sketchpad_mouseDown(){mouseDown=1;drawDot(ctx,mouseX,mouseY,8)}function sketchpad_mouseUp(){mouseDown=0;ctx.clearRect(0,0,clientCanvas.width,clientCanvas.height)}function sketchpad_mouseMove(n){getMousePos(n);mouseDown===1&&drawDot(ctx,mouseX,mouseY,8)}function getMousePos(n){n||(n=event);mouseX=n.layerX;mouseY=n.layerY}function sketchpad_touchStart(){getTouchPos();drawDot(ctx,touchX,touchY,8);event.preventDefault()}function sketchpad_touchEnd(){}function sketchpad_touchMove(n){getTouchPos(n);drawDot(ctx,touchX,touchY,8);event.preventDefault()}function getTouchPos(n){if(n||(n=event),n.touches&&n.touches.length===1){var t=n.touches[0];touchX=t.pageX;touchY=t.pageY}}var instance,engine,playerDict,ball,clientCanvas,canvasCenter,ctx,mouseX,mouseY,mouseDown;window.createref=n=>{instance=n};window.onunload=disconnect;playerDict={};window.gamestart=(n,t,i)=>{var a=document.getElementById("gameCanvas"),u=window.innerWidth/2,f=window.innerHeight/2,h=Matter.Engine,c=Matter.Render,e=Matter.World,r=Matter.Bodies,l;engine=h.create();l=c.create({canvas:a,engine:engine,options:{height:window.innerHeight,width:window.innerWidth,wireframes:!1,showVelocity:!0}});engine.world.gravity.y=0;e.add(engine.world,[r.rectangle(u,0,window.innerWidth,1,{isStatic:!0}),r.rectangle(u,window.innerHeight,window.innerWidth,1,{isStatic:!0}),r.rectangle(0,f,1,window.innerHeight,{isStatic:!0}),r.rectangle(window.innerWidth,f,1,window.innerHeight,{isStatic:!0})]);ball=r.circle(u,f,40,{render:{fillStyle:"white"}});e.add(engine.world,[ball]);var v=JSON.parse(n),o=1,s=1,y=window.innerHeight/(t+1),p=window.innerHeight/(i+1);v.forEach(n=>{var t,i,f;n.Team==1?(i=1/2*u,f=y*o,t=r.polygon(i,f,2+o,60,{render:{fillStyle:"orange"},angle:3.14}),o++):n.Team==2&&(i=3/2*u,f=p*s,t=r.polygon(i,f,2+s,60,{render:{fillStyle:"teal"}}),s++);e.add(engine.world,t);playerDict[n.Id]=t});h.run(engine);c.run(l)};window.fullscreen=()=>{document.getElementById("client").requestFullscreen()};canvasCenter={x:0,y:0};window.initcontrols=()=>{clientCanvas=document.getElementById("controlsCanvas");var n=Math.min(window.innerHeight,window.innerWidth,700);clientCanvas.width=n;clientCanvas.height=n;canvasCenter={x:n/2,y:n/2};clientCanvas.getContext&&(ctx=clientCanvas.getContext("2d"));ctx&&(clientCanvas.addEventListener("mousedown",sketchpad_mouseDown,!1),clientCanvas.addEventListener("mousemove",sketchpad_mouseMove,!1),window.addEventListener("mouseup",sketchpad_mouseUp,!1),clientCanvas.addEventListener("touchstart",sketchpad_touchStart,!1),clientCanvas.addEventListener("touchend",sketchpad_touchEnd,!1),clientCanvas.addEventListener("touchmove",sketchpad_touchMove,!1))};